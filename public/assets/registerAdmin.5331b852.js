import{Q as i}from"./QInput.6e1b2dad.js";import{_ as h,z as V,ax as S,at as w,u as b,a as q,r as C,au as v,o as U,b as z,f as n,w as E,e,i as y,Q as P,g as Q,av as R,aw as T}from"./index.ebd26a2c.js";import{Q as A}from"./QForm.caf18b7c.js";const I=u=>(R("data-v-22e3a12c"),u=u(),T(),u),B={class:"Container"},N=I(()=>y("h2",null,"Register first administrator",-1)),D={__name:"registerAdmin",setup(u){V(s=>({"728a59c6":e(r).text}));const c=S();w();let d=b(),o=q(),l=C({username:"",email:"",pass:"",passV:"",accountType:"admin"}),k=new RegExp(/^((?=\S*?[A-Z])(?=\S*?[a-z])(?=\S*?[0-9]).{12,})\S$/),x=RegExp(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/);function p(s){return k.test(s)}function m(s){return x.test(s)}function f(s){if(s.preventDefault(),l.username!=""&&m(l.email)&&l.accountType!=""&&p(l.pass)&&l.pass==l.passV){let t={username:l.username,email:l.email,type:l.accountType,password:l.pass};console.log(c.query.token),fetch("http://localhost:5500/auth/signUp/",{method:"POST",headers:{"Content-Type":"application/json",authorization:c.query.token},body:JSON.stringify(t)}).then(a=>{a.json().then(g=>{g.token!=null&&(d.$patch(_=>{_.token=g.token}),Q.push("/"))})})}}let r=v(()=>(o=q(),d=b(),d.mode=="Dark"?{base:o.dark.base,gray:o.dark.gray,color:o.dark.color,darkColor:o.dark.darkColor,text:o.dark.text,qbase:o.dark.qbase,qtext:o.dark.qtext,qgrey:o.dark.qgrey,qcolor:o.dark.qcolor,qdarkcolor:o.dark.qdarkColor}:d.mode=="Light"?{base:o.light.base,gray:o.light.gray,color:o.light.color,qcolor:o.light.qcolor,darkColor:o.light.darkColor,text:o.light.text,qbase:o.light.qbase,qtext:o.light.qtext,qgrey:o.light.qgrey,qdarkcolor:o.light.qdarkColor}:{qbase:"blue",base:"#ecf0f1",gray:"#bdc3c7",qgrey:"grey-3",color:"#3498db",darkColor:"#2980b9",text:"#000000",qtext:"dark",qcolor:"blue-10",qdarkcolor:"dark"}));return(s,t)=>(U(),z("div",B,[n(A,{onSubmit:s.onSubmit,class:"q-gutter-md"},{default:E(()=>[N,n(i,{filled:"",modelValue:e(l).email,"onUpdate:modelValue":t[0]||(t[0]=a=>e(l).email=a),label:"Email*","lazy-rules":"",rules:[a=>m(a)||"This is not a valid email."],"bg-color":e(r).qgrey,color:e(r).qtext,"label-color":e(r).qtext},null,8,["modelValue","rules","bg-color","color","label-color"]),n(i,{filled:"",modelValue:e(l).username,"onUpdate:modelValue":t[1]||(t[1]=a=>e(l).username=a),label:"UserName*","lazy-rules":"",rules:[a=>a&&a.length>0||"Please type your username"],"bg-color":e(r).qgrey,color:e(r).qtext,"label-color":e(r).qtext},null,8,["modelValue","rules","bg-color","color","label-color"]),n(i,{filled:"",type:"password",modelValue:e(l).pass,"onUpdate:modelValue":t[2]||(t[2]=a=>e(l).pass=a),label:"Password *","lazy-rules":"",rules:[a=>p(a)||"Password must contain atleast 12 characters, capital letter and numbers."],"bg-color":e(r).qgrey,color:e(r).qtext,"label-color":e(r).qtext},null,8,["modelValue","rules","bg-color","color","label-color"]),n(i,{filled:"",type:"password",modelValue:e(l).passV,"onUpdate:modelValue":t[3]||(t[3]=a=>e(l).passV=a),label:"Password *","lazy-rules":"",rules:[a=>a==e(l).pass||"Passwords are different"],"bg-color":e(r).qgrey,color:e(r).qtext,"label-color":e(r).qtext},null,8,["modelValue","rules","bg-color","color","label-color"]),y("div",null,[n(P,{label:"Submit",type:"submit",color:e(r).qbase,onClick:f},null,8,["color"])])]),_:1},8,["onSubmit"])]))}},F=h(D,[["__scopeId","data-v-22e3a12c"]]);export{F as default};
