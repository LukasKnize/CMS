import{Q as c}from"./QInput.dab6733f.js";import{Q as b}from"./QSelect.3a951a68.js";import{Q as q}from"./QToggle.a50695be.js";import{_ as y,z as f,u as g,a as u,c as k,r as p,o as x,b as _,f as d,w as C,e as l,n as V,Q as S}from"./index.f58664d0.js";import{Q as I}from"./QForm.03b90a7a.js";const P={class:"container"},v={__name:"addPage",setup(Q){f(n=>({"20e7cc84":l(r).text}));let s=g(),o=u(),r=k(()=>(o=u(),s=g(),s.mode=="Dark"?{base:o.dark.base,gray:o.dark.gray,color:o.dark.color,darkColor:o.dark.darkColor,text:o.dark.text,qbase:o.dark.qbase,qtext:o.dark.qtext,qgrey:o.dark.qgrey,qcolor:o.dark.qcolor,qdarkcolor:o.dark.qdarkColor}:s.mode=="Light"?{base:o.light.base,gray:o.light.gray,color:o.light.color,qcolor:o.light.qcolor,darkColor:o.light.darkColor,text:o.light.text,qbase:o.light.qbase,qtext:o.light.qtext,qgrey:o.light.qgrey,qdarkcolor:o.light.qdarkColor}:{qbase:"blue",base:"#ecf0f1",gray:"#bdc3c7",qgrey:"grey-3",color:"#3498db",darkColor:"#2980b9",text:"#000000",qtext:"dark",qcolor:"blue-10",qdarkcolor:"dark"})),t=p({headline:"",url:"",desc:"",template:"",save:!1}),m=p({templates:""});fetch("http://localhost:5500/template/all",{method:"GET",headers:{"Content-Type":"application/json",authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ik5la28iLCJlbWFpbCI6Im5la29AdGhlNG5la28uaW8iLCJ0eXBlIjoiYWRtaW4iLCJpYXQiOjE2NzE2MzYyODd9.9760M_vr79SLJUg74lwTQ43_Kc0VApesnV-2GGjXXXA"}}).then(n=>{n.json().then(a=>{let e=[];for(let i=0;i<a.templates.length;i++)e.push(a.templates[i].name);m.templates=e})});function h(n){n.preventDefault(),t.save?fetch("http://localhost:5500/pages/",{method:"POST",headers:{"Content-Type":"application/json",authorization:s.token},body:JSON.stringify(t)}).then(a=>{a.json().then(e=>{console.log(e.message),e.message=="created"?window.location.href="http://localhost:5500/template/edit/"+t.template+"?token="+s.token+"&id="+e.id+"&save=false":console.log(e.message)})}):fetch("http://localhost:5500/pages/save",{method:"POST",headers:{"Content-Type":"application/json",authorization:s.token},body:JSON.stringify(t)}).then(a=>{a.json().then(e=>{console.log(e.message),e.message=="created"?window.location.href="http://localhost:5500/template/edit/"+t.template+"?token="+s.token+"&id="+t.url+"$-$"+t.headline+"$-$"+t.desc+"&save=true":console.log(e.message)})})}return(n,a)=>(x(),_("div",P,[d(I,{onSubmit:n.onSubmit,onReset:n.onReset,class:"q-gutter-md"},{default:C(()=>[d(c,{filled:"",modelValue:l(t).headline,"onUpdate:modelValue":a[0]||(a[0]=e=>l(t).headline=e),label:"Page name *","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"],"bg-color":l(r).qgrey,color:l(r).qtext,"label-color":l(r).qtext},null,8,["modelValue","rules","bg-color","color","label-color"]),d(c,{filled:"",modelValue:l(t).url,"onUpdate:modelValue":a[1]||(a[1]=e=>l(t).url=e),label:"Adress *","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"],"bg-color":l(r).qgrey,color:l(r).qtext,"label-color":l(r).qtext},null,8,["modelValue","rules","bg-color","color","label-color"]),d(c,{filled:"",modelValue:l(t).desc,"onUpdate:modelValue":a[2]||(a[2]=e=>l(t).desc=e),label:"Short description *","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"],"bg-color":l(r).qgrey,color:l(r).qtext,"label-color":l(r).qtext},null,8,["modelValue","rules","bg-color","color","label-color"]),d(b,{filled:"",modelValue:l(t).template,"onUpdate:modelValue":a[3]||(a[3]=e=>l(t).template=e),options:l(m).templates,label:"Select template *",rules:[e=>e&&e.length>0||"Please select something"],"bg-color":l(r).qgrey,color:l(r).qtext,"label-color":l(r).qtext},null,8,["modelValue","options","rules","bg-color","color","label-color"]),d(q,{modelValue:l(t).save,"onUpdate:modelValue":a[4]||(a[4]=e=>l(t).save=e),label:"Use API",class:V("text-"+l(r).qtext)},null,8,["modelValue","class"]),d(S,{label:"Submit",type:"submit",color:l(r).qbase,onClick:h},null,8,["color"])]),_:1},8,["onSubmit","onReset"])]))}},w=y(v,[["__scopeId","data-v-e5148cf9"]]);export{w as default};
